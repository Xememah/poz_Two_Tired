webpackJsonp([1],{26:function(t,e,n){"use strict";var a=n(15),r=n(78),i=n(71),o=n.n(i);a.a.use(r.a),e.a=new r.a({routes:[{path:"/",name:"Landing",component:o.a}]})},27:function(t,e,n){function a(t){n(70)}var r=n(9)(n(28),n(77),a,null,null);t.exports=r.exports},28:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{}}}},29:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(72),r=n.n(a);e.default={components:{mapView:r.a},data:function(){return{}},mounted:function(){}}},30:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(34),r=n.n(a),i=n(73),o=n.n(i),s=n(32);e.default={components:{timeline:o.a},data:function(){return{interval:500,addition:6,future:60,markers:{},markersData:void 0,lastUpdate:0,pathUpdate:0,colors:{BIKE_CITY:"#EA2E49",BIKE_MOUNTAIN:"#333745",BIKE_ROAD:"#5C832F",BIKE_TREKKING:"#2980B9",DEFAULT:"#cc0000"}}},mounted:function(){this.initMap()},methods:{fetchData:function(t,e){var n=this,a="https://twotired.math.party/data?timestamp="+t+"&duration="+e;(new s.a).get(a,function(e){n.markersData=JSON.parse(e).slice(0,80),n.updatePaths(t),n.pathUpdate=t})},timeChange:function(t){if(t-this.lastUpdate>(this.future-this.addition)*(this.interval/1e3))this.lastUpdate=t,this.fetchData(t,this.future);else{console.log(new Date(1e3*t).toString());var e=document.getElementById("slider-connect");console.log(t),console.log(e.noUiSlider.get()),this.updatePaths(t),this.pathUpdate=t}},updatePaths:function(t,e){if(this.markersData){var n=!0,a=!1,i=void 0;try{for(var o,s=r()(this.markersData);!(n=(o=s.next()).done);n=!0){var l=o.value;if(this.markers&&this.markers[l.hash]){var c=this.markers[l.hash],u=c.getPath(),h=!0,d=!1,m=void 0;try{for(var f,p=r()(l.steps);!(h=(f=p.next()).done);h=!0){var v=f.value;v.ts>this.pathUpdate&&v.ts<=t&&u.push(new google.maps.LatLng(v.lat,v.lng))}}catch(t){d=!0,m=t}finally{try{!h&&p.return&&p.return()}finally{if(d)throw m}}continue}else{var g=this.initMarker(l,t);this.markers[l.hash]=g}}}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}}},initMarker:function(t,e){var n={path:google.maps.SymbolPath.FORWARD_CLOSED_ARROW,scale:3,strokeWeight:3},a=new google.maps.Polyline({icons:[{icon:n,offset:"100%"}],geodesic:!1,strokeColor:"#cc0000",strokeOpacity:1,strokeWeight:3});this.colors[t.activity_type]?(n.strokeColor=this.colors[t.activity_type],a.strokeColor=this.colors[t.activity_type]):(n.strokeColor=this.colors.DEFAULT,a.strokeColor=this.colors.DEFAULT);var i=[],o=!0,s=!1,l=void 0;try{for(var c,u=r()(t.steps);!(o=(c=u.next()).done);o=!0){var h=c.value;h.ts<=e&&i.push({lat:h.lat,lng:h.lng})}}catch(t){s=!0,l=t}finally{try{!o&&u.return&&u.return()}finally{if(s)throw l}}return a.path=i,a.setMap(this.map),a},initMap:function(){var t={lat:52.385392,lng:16.992963};this.map=new google.maps.Map(document.getElementById("map"),{scrollwheel:!1,zoom:13,center:t})},populateMarkers:function(){this.animateCircle(markerPath)},animateCircle:function(t){var e=0;window.setInterval(function(){e=(e+1)%200;var n=t.get("icons");n[0].offset=e/2+"%",t.set("icons",n)},300)},changeTarget:function(){var t=this,e=this.city+", "+this.target+", Polska",n=new google.maps.Geocoder,a=this.map;n.geocode({address:e},function(e,n){if("OK"===n){if(a.panTo(e[0].geometry.location),a.setZoom(15),t.marker&&t.marker.setMap(null),null===t.marker){var r=new google.maps.Marker({position:e[0].geometry.location,title:"Tu jesteś!"});t.marker=r,r.setMap(t.map)}t.marker=null}})}}}},31:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{constraints:{},max:0,min:0,current:0,inter:{}}},props:["interval","addition"],mounted:function(){function t(t){return r.formatDate(new Date(1e3*t),!0)}function e(t){return r.formatDate(new Date(1e3*t),!1)}function n(t){var e=t.slice(-33);e=e.replace(/<[^>]*>/g,"");var n=e.match(/(\d+).(\d+).(\d+) (\d+):(\d+)/);return console.log(n),new Date,e=new Date(n[3],parseInt(n[2],10)-1,n[1],n[4],n[5]),console.log(e.getTime()),e}this.fetchData(),this.interval=window.setInterval(this.tick,300);var a=document.getElementById("slider-connect");console.log(this.min+" ; "+this.max);var r=this,i=noUiSlider.create(a,{start:this.min,connect:[!0,!1],tooltips:[!0],format:{to:t,from:Number},range:{min:this.min-5e3,max:this.max+5e3},step:2e3,pips:{format:{to:e,from:Number},mode:"values",values:[this.min,this.max]}}),o=this;i.target.noUiSlider.on("change",function(t,e){n(t[e])<1e3*o.min?(console.log("za mały"),i.target.noUiSlider.set(o.min)):n(t[e])>1e3*o.max&&(console.log("that's what she said"),i.target.noUiSlider.set(o.max))}),this.inter=window.setInterval(this.tick,Number(this.interval))},dismounted:function(){clearInterval(this.inter)},methods:{tick:function(){this.current+=Number(this.addition),this.$emit("timeChange",this.current)},formatDate:function(t,e){function n(t,e){return e&&(t+=1),t<10?"0"+t:t}var a=["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"];return e?a[t.getDay()]+", "+n(t.getDate(),!1)+"."+n(t.getMonth(),!0)+"."+t.getFullYear()+" <strong>"+n(t.getHours(),!1)+":"+n(t.getMinutes(),!1)+"</strong>":n(t.getDate(),!1)+"."+n(t.getMonth(),!0)+"."+t.getFullYear()},fetchData:function(){var t=new XMLHttpRequest;t.open("GET","https://twotired.math.party/timestamps",!1),t.send(null);var e=JSON.parse(t.responseText);this.max=e.max,this.min=this.max-86400,this.current=1483225486}}}},32:function(t,e,n){"use strict";var a=n(36),r=n.n(a),i=n(37),o=n.n(i),s=function(){function t(){r()(this,t)}return o()(t,[{key:"get",value:function(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&200==n.status&&e(n.responseText)},n.open("GET",t,!0),n.send(null)}}]),t}();e.a=s},33:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(15),r=n(27),i=n.n(r),o=n(26);a.a.config.productionTip=!1,new a.a({el:"#app",router:o.a,template:"<App/>",components:{App:i.a}})},68:function(t,e){},69:function(t,e){},70:function(t,e){},71:function(t,e,n){function a(t){n(69)}var r=n(9)(n(29),n(75),a,null,null);t.exports=r.exports},72:function(t,e,n){var a=n(9)(n(30),n(76),null,null,null);t.exports=a.exports},73:function(t,e,n){function a(t){n(68)}var r=n(9)(n(31),n(74),a,null,null);t.exports=r.exports},74:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"timeline"},[n("div",{attrs:{id:"slider-connect"}})])}]}},75:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("mapView")},staticRenderFns:[]}},76:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"map"}}),t._v(" "),n("timeline",{attrs:{interval:t.interval,addition:t.addition},on:{timeChange:t.timeChange}})],1)},staticRenderFns:[]}},77:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]}}},[33]);
//# sourceMappingURL=app.7d4f90b2e71eed04a1ad.js.map